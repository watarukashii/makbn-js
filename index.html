<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
https://docs.google.com/document/d/1hbhItV3n_EQZQ-UslDCdDswRcCaVHANAJUANS7-PYP4/edit
-->
<html lang="ja">
	<head>
		<meta charset="UTF-8">
		<title>TODO supply a title</title>
		<link rel="stylesheet" href="css/style.css">
		<script src="js/jquery-1.10.2.js"></script>
		<script>
			$(function () {
				//#mkbnの取得
				var $ul = $('#mkbn');
				//＃mkbn内の<li>をすべて取得する
				var $li = $ul.find('li');
				// <li> の幅を取得 (数値) 
				var liWidth = $li.width();
				// プロパティなので括弧はいらない
				var liLength = $li.length;
				// 外側の幅が決まります
				var ulWidth = liWidth * liLength;
				// 
				$ul.width(ulWidth);

				// 現在中央に着ているliの番号
				var currentIndex = 0;

				// 再帰
				function slide () {
					// currentIndexに1を加算する
					// currentIndex = currentIndex +1;　と同じ意味
					currentIndex += 1;
					// 現在のliの番号がいliの数を超えた時一番最後の画像にきたら、幅と番号を初期化
					if (currentIndex > liLength - 1) {
						currentIndex = 0;
					}
					// setTimeout(処理、何ミリ秒後)
					setTimeout(function(){
						$ul
						.animate({ left: liWidth * -1 * currentIndex })
						// animate実行した後にそのアニメーションが実行してるか監視
						.promise()
						// animateがちゃんと実行された後に実行したい処理を入れる。
						// done(slide())だと、アニメーションが実行する前にslideが実行されてしまうため、
						// 実行したい関数を変数として明示的に指定しておく
						.done(slide);
					}, 600);
				}
				
				// 再帰関数を実行
				slide();

			});
	</script>
	</head>
	<body>
		<div id="mkbn">
			<ul>
				<li style="background-color:red">1</li>
				<li style="background-color:blue">2</li>
				<li style="background-color:green">3</li>
				<li style="background-color:purple">4</li>
				<li style="background-color:yellow">5</li>
				<li style="background-color:cyan">6</li>
			</ul>
		</div>
		
	</body>

</html>
